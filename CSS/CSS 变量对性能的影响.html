<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSS 变量对性能的影响 | 光之晨曦🌟🌟🌟</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/vue-collect/favicon.ico">
    <meta name="description" content="技术需要沉淀,十年方能磨一剑">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/vue-collect/assets/css/0.styles.9c971594.css" as="style"><link rel="preload" href="/vue-collect/assets/js/app.65dbe37a.js" as="script"><link rel="preload" href="/vue-collect/assets/js/3.c628116f.js" as="script"><link rel="preload" href="/vue-collect/assets/js/1.c6af9e45.js" as="script"><link rel="preload" href="/vue-collect/assets/js/13.edf374e0.js" as="script"><link rel="prefetch" href="/vue-collect/assets/js/10.49dc210d.js"><link rel="prefetch" href="/vue-collect/assets/js/11.0241e6b2.js"><link rel="prefetch" href="/vue-collect/assets/js/12.0d2455c0.js"><link rel="prefetch" href="/vue-collect/assets/js/14.b03f0e8c.js"><link rel="prefetch" href="/vue-collect/assets/js/15.66653b42.js"><link rel="prefetch" href="/vue-collect/assets/js/16.4940672d.js"><link rel="prefetch" href="/vue-collect/assets/js/17.33558916.js"><link rel="prefetch" href="/vue-collect/assets/js/18.5d930a67.js"><link rel="prefetch" href="/vue-collect/assets/js/19.1d318bc4.js"><link rel="prefetch" href="/vue-collect/assets/js/20.aacec794.js"><link rel="prefetch" href="/vue-collect/assets/js/21.3485ac8a.js"><link rel="prefetch" href="/vue-collect/assets/js/22.61a68164.js"><link rel="prefetch" href="/vue-collect/assets/js/23.5bb509b8.js"><link rel="prefetch" href="/vue-collect/assets/js/24.7cae988b.js"><link rel="prefetch" href="/vue-collect/assets/js/25.bb4941c3.js"><link rel="prefetch" href="/vue-collect/assets/js/26.7b48c5be.js"><link rel="prefetch" href="/vue-collect/assets/js/27.06391115.js"><link rel="prefetch" href="/vue-collect/assets/js/28.b1458ba3.js"><link rel="prefetch" href="/vue-collect/assets/js/29.58a1b085.js"><link rel="prefetch" href="/vue-collect/assets/js/30.53621a4a.js"><link rel="prefetch" href="/vue-collect/assets/js/31.d78395fc.js"><link rel="prefetch" href="/vue-collect/assets/js/32.76f9ef38.js"><link rel="prefetch" href="/vue-collect/assets/js/33.a7772550.js"><link rel="prefetch" href="/vue-collect/assets/js/34.78492257.js"><link rel="prefetch" href="/vue-collect/assets/js/35.35f389ea.js"><link rel="prefetch" href="/vue-collect/assets/js/36.990857ef.js"><link rel="prefetch" href="/vue-collect/assets/js/37.0785c583.js"><link rel="prefetch" href="/vue-collect/assets/js/38.63f36ade.js"><link rel="prefetch" href="/vue-collect/assets/js/39.ccfbdf6b.js"><link rel="prefetch" href="/vue-collect/assets/js/4.ac0d0ae4.js"><link rel="prefetch" href="/vue-collect/assets/js/40.534906f9.js"><link rel="prefetch" href="/vue-collect/assets/js/41.c3e68c4e.js"><link rel="prefetch" href="/vue-collect/assets/js/42.684da874.js"><link rel="prefetch" href="/vue-collect/assets/js/43.8121c3dc.js"><link rel="prefetch" href="/vue-collect/assets/js/44.17ab1a4b.js"><link rel="prefetch" href="/vue-collect/assets/js/45.cd25cb57.js"><link rel="prefetch" href="/vue-collect/assets/js/46.ca85633c.js"><link rel="prefetch" href="/vue-collect/assets/js/47.21933d59.js"><link rel="prefetch" href="/vue-collect/assets/js/48.24868115.js"><link rel="prefetch" href="/vue-collect/assets/js/49.3ed8af59.js"><link rel="prefetch" href="/vue-collect/assets/js/5.fb700727.js"><link rel="prefetch" href="/vue-collect/assets/js/50.354ff064.js"><link rel="prefetch" href="/vue-collect/assets/js/51.8c2b338b.js"><link rel="prefetch" href="/vue-collect/assets/js/52.c686d8c7.js"><link rel="prefetch" href="/vue-collect/assets/js/53.57b20e69.js"><link rel="prefetch" href="/vue-collect/assets/js/54.52ef563f.js"><link rel="prefetch" href="/vue-collect/assets/js/55.8269d62b.js"><link rel="prefetch" href="/vue-collect/assets/js/56.836f31a1.js"><link rel="prefetch" href="/vue-collect/assets/js/57.fa5c908d.js"><link rel="prefetch" href="/vue-collect/assets/js/58.99fac64e.js"><link rel="prefetch" href="/vue-collect/assets/js/59.38a1c8e4.js"><link rel="prefetch" href="/vue-collect/assets/js/6.8b581b02.js"><link rel="prefetch" href="/vue-collect/assets/js/60.01f241ff.js"><link rel="prefetch" href="/vue-collect/assets/js/61.7585e3cd.js"><link rel="prefetch" href="/vue-collect/assets/js/62.5d2acbb1.js"><link rel="prefetch" href="/vue-collect/assets/js/63.1692b0a2.js"><link rel="prefetch" href="/vue-collect/assets/js/64.b78c448c.js"><link rel="prefetch" href="/vue-collect/assets/js/65.6de8cea8.js"><link rel="prefetch" href="/vue-collect/assets/js/66.c2e8b91b.js"><link rel="prefetch" href="/vue-collect/assets/js/67.179b49f9.js"><link rel="prefetch" href="/vue-collect/assets/js/68.3acbcc4f.js"><link rel="prefetch" href="/vue-collect/assets/js/69.7269f116.js"><link rel="prefetch" href="/vue-collect/assets/js/7.fc92c449.js"><link rel="prefetch" href="/vue-collect/assets/js/70.325daea0.js"><link rel="prefetch" href="/vue-collect/assets/js/71.5f3f7b27.js"><link rel="prefetch" href="/vue-collect/assets/js/72.cbb9eeee.js"><link rel="prefetch" href="/vue-collect/assets/js/73.1bb373b5.js"><link rel="prefetch" href="/vue-collect/assets/js/74.27677327.js"><link rel="prefetch" href="/vue-collect/assets/js/75.c71706ec.js"><link rel="prefetch" href="/vue-collect/assets/js/76.77b1a3f7.js"><link rel="prefetch" href="/vue-collect/assets/js/77.878b1d47.js"><link rel="prefetch" href="/vue-collect/assets/js/78.e79c8644.js"><link rel="prefetch" href="/vue-collect/assets/js/79.40e51d12.js"><link rel="prefetch" href="/vue-collect/assets/js/8.15bebc7e.js"><link rel="prefetch" href="/vue-collect/assets/js/80.6515ad1d.js"><link rel="prefetch" href="/vue-collect/assets/js/81.430e9e16.js"><link rel="prefetch" href="/vue-collect/assets/js/82.accf7c86.js"><link rel="prefetch" href="/vue-collect/assets/js/83.d176ca6f.js"><link rel="prefetch" href="/vue-collect/assets/js/84.2b19c1b9.js"><link rel="prefetch" href="/vue-collect/assets/js/85.43182d27.js"><link rel="prefetch" href="/vue-collect/assets/js/86.c43652ad.js"><link rel="prefetch" href="/vue-collect/assets/js/87.c7d25eac.js"><link rel="prefetch" href="/vue-collect/assets/js/88.efdf28e7.js"><link rel="prefetch" href="/vue-collect/assets/js/89.5f5859a2.js"><link rel="prefetch" href="/vue-collect/assets/js/9.31803082.js"><link rel="prefetch" href="/vue-collect/assets/js/90.830dffd8.js">
    <link rel="stylesheet" href="/vue-collect/assets/css/0.styles.9c971594.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>光之晨曦🌟🌟🌟</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>晨曦</span>
            
          <span data-v-64685f0e>2021 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-collect/" class="home-link router-link-active"><img src="/vue-collect/logo.jpg" alt="光之晨曦🌟🌟🌟" class="logo"> <span class="site-name">光之晨曦🌟🌟🌟</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-collect/" class="nav-link"><i class="iconfont undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-collect/categories/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/FrontEnd/" class="nav-link"><i class="iconfont undefined"></i>
  FrontEnd
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/GraphQL/" class="nav-link"><i class="iconfont undefined"></i>
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/TypeScript/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/Webpack/" class="nav-link"><i class="iconfont undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/数据结构与算法/" class="nav-link"><i class="iconfont undefined"></i>
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/推荐文档/" class="nav-link"><i class="iconfont undefined"></i>
  推荐文档
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/浏览器相关/" class="nav-link"><i class="iconfont undefined"></i>
  浏览器相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      JS指南
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-collect/basics/" class="nav-link"><i class="iconfont undefined"></i>
  JS基础相关
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/script/" class="nav-link"><i class="iconfont undefined"></i>
  ECMAScript 6
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/git/" class="nav-link"><i class="iconfont undefined"></i>
  OOP面向对象编程
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/design/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-collect/vue/jichu/" class="nav-link"><i class="iconfont undefined"></i>
  Vue基础相关
</a></li><li class="dropdown-subitem"><a href="/vue-collect/vue/tuozhan/" class="nav-link"><i class="iconfont undefined"></i>
  Vue官方生态
</a></li><li class="dropdown-subitem"><a href="/vue-collect/vue/hexin/" class="nav-link"><i class="iconfont undefined"></i>
  Vue.js的设计核心
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      性能优化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端缓存</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-collect/pages/http/" class="nav-link"><i class="iconfont undefined"></i>
  HTTP缓存
</a></li><li class="dropdown-subitem"><a href="/vue-collect/pages/data/" class="nav-link"><i class="iconfont undefined"></i>
  数据缓存
</a></li><li class="dropdown-subitem"><a href="/vue-collect/pages/offline/" class="nav-link"><i class="iconfont undefined"></i>
  离线缓存
</a></li><li class="dropdown-subitem"><a href="/vue-collect/pages/cdn/" class="nav-link"><i class="iconfont undefined"></i>
  CDN缓存
</a></li></ul></li><li class="dropdown-item"><h4>优化方案</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-collect/seo/" class="nav-link"><i class="iconfont undefined"></i>
  SEO方向的优化方案
</a></li><li class="dropdown-subitem"><a href="/vue-collect/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  Webpack的性能优化
</a></li><li class="dropdown-subitem"><a href="/vue-collect/canvas/" class="nav-link"><i class="iconfont undefined"></i>
  Canvas性能优化方案
</a></li><li class="dropdown-subitem"><a href="/vue-collect/app/" class="nav-link"><i class="iconfont undefined"></i>
  了解常见的Web、App性能优化方案
</a></li><li class="dropdown-subitem"><a href="/vue-collect/frame/" class="nav-link"><i class="iconfont undefined"></i>
  React、Vue框架使用性能优化方案
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端工程化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-collect/pack/git/" class="nav-link"><i class="iconfont undefined"></i>
  部署
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/vite/" class="nav-link"><i class="iconfont undefined"></i>
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  WebPack
</a></li></ul></div></div><div class="nav-item"><a href="/vue-collect/pages/expand/" class="nav-link"><i class="iconfont undefined"></i>
  第三方拓展
</a></div><div class="nav-item"><a href="/vue-collect/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/vue-collect/about/" class="nav-link"><i class="iconfont reco-other"></i>
  关于
</a></div> <a href="https://github.com//cxman1" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><img src="/vue-collect/avatar.jpg" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    晨曦
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>80</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>60</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/vue-collect/" class="nav-link"><i class="iconfont undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      前端开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-collect/categories/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/FrontEnd/" class="nav-link"><i class="iconfont undefined"></i>
  FrontEnd
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/GraphQL/" class="nav-link"><i class="iconfont undefined"></i>
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/TypeScript/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/Webpack/" class="nav-link"><i class="iconfont undefined"></i>
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/数据结构与算法/" class="nav-link"><i class="iconfont undefined"></i>
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/推荐文档/" class="nav-link"><i class="iconfont undefined"></i>
  推荐文档
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/categories/浏览器相关/" class="nav-link"><i class="iconfont undefined"></i>
  浏览器相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      JS指南
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-collect/basics/" class="nav-link"><i class="iconfont undefined"></i>
  JS基础相关
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/script/" class="nav-link"><i class="iconfont undefined"></i>
  ECMAScript 6
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/git/" class="nav-link"><i class="iconfont undefined"></i>
  OOP面向对象编程
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/design/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-collect/vue/jichu/" class="nav-link"><i class="iconfont undefined"></i>
  Vue基础相关
</a></li><li class="dropdown-subitem"><a href="/vue-collect/vue/tuozhan/" class="nav-link"><i class="iconfont undefined"></i>
  Vue官方生态
</a></li><li class="dropdown-subitem"><a href="/vue-collect/vue/hexin/" class="nav-link"><i class="iconfont undefined"></i>
  Vue.js的设计核心
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      性能优化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端缓存</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-collect/pages/http/" class="nav-link"><i class="iconfont undefined"></i>
  HTTP缓存
</a></li><li class="dropdown-subitem"><a href="/vue-collect/pages/data/" class="nav-link"><i class="iconfont undefined"></i>
  数据缓存
</a></li><li class="dropdown-subitem"><a href="/vue-collect/pages/offline/" class="nav-link"><i class="iconfont undefined"></i>
  离线缓存
</a></li><li class="dropdown-subitem"><a href="/vue-collect/pages/cdn/" class="nav-link"><i class="iconfont undefined"></i>
  CDN缓存
</a></li></ul></li><li class="dropdown-item"><h4>优化方案</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-collect/seo/" class="nav-link"><i class="iconfont undefined"></i>
  SEO方向的优化方案
</a></li><li class="dropdown-subitem"><a href="/vue-collect/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  Webpack的性能优化
</a></li><li class="dropdown-subitem"><a href="/vue-collect/canvas/" class="nav-link"><i class="iconfont undefined"></i>
  Canvas性能优化方案
</a></li><li class="dropdown-subitem"><a href="/vue-collect/app/" class="nav-link"><i class="iconfont undefined"></i>
  了解常见的Web、App性能优化方案
</a></li><li class="dropdown-subitem"><a href="/vue-collect/frame/" class="nav-link"><i class="iconfont undefined"></i>
  React、Vue框架使用性能优化方案
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端工程化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-collect/pack/git/" class="nav-link"><i class="iconfont undefined"></i>
  部署
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/vite/" class="nav-link"><i class="iconfont undefined"></i>
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/vue-collect/pack/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  WebPack
</a></li></ul></div></div><div class="nav-item"><a href="/vue-collect/pages/expand/" class="nav-link"><i class="iconfont undefined"></i>
  第三方拓展
</a></div><div class="nav-item"><a href="/vue-collect/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><a href="/vue-collect/about/" class="nav-link"><i class="iconfont reco-other"></i>
  关于
</a></div> <a href="https://github.com//cxman1" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>CSS 变量对性能的影响</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>晨曦</span>
            
          <span data-v-64685f0e>2021 - </span>
          2022
        </a></span></div></div> <div data-v-2d5f533b><main class="page"><div class="page-title" style="display:none;"><h1 class="title">CSS 变量对性能的影响</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>晨曦</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2020-06-22</span></i> <!----> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>性能优化</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><ol><li>作用域与优先级</li> <li>样式的继承和重新计算</li> <li>CSS 变量与 calc() 一起使用的几种方式及其对比</li> <li>浏览器支持情况</li> <li>使用 JS 设置 CSS 变量的几种方法及其对比</li></ol></div> <p>距离 CSS 变量的出现已经有段时间了，尽管仍然缺乏一些浏览器的支持（主要是 IE 和 Edge），但 CSS 变量提供了一种很好的新方式来构建和与 CSS 进行交互。 为了进一步了解 CSS 变量对性能的影响，我们必须理解作用域的基本原理，因为它也适用于 CSS 变量。</p> <h2 id="tl-dr"><a href="#tl-dr" class="header-anchor">#</a> TL;DR</h2> <ul><li>注意样式的重新计算，因为 CSS 变量是可继承的，更改父元素上样式会影响许多子元素</li> <li>最好是对元素使用单个类，以使得浏览器对样式的计算变得更为容易</li> <li><code>calc()</code> 这种计算方式有较好的性能，但是在某些特定的单位计算上仍然有问题（例如 <code>deg</code> 和 <code>ms</code>）</li> <li>在 JavaScript 中给元素设置 CSS 变量，最好是使用 <code>setProperty</code> 而不是用内联样式</li></ul> <h2 id="全局作用域-vs-局部作用域"><a href="#全局作用域-vs-局部作用域" class="header-anchor">#</a> 全局作用域 vs 局部作用域</h2> <p>作用域的概念在大多数编程语言中都存在，它定义了变量是在整个文档中生效，还是仅仅在文档的子部分生效(例如在 CSS 类中)。对于 CSS 变量，我们可以像下面这样在全局作用域内定义变量：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
	<span class="token property">--main-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果希望这些变量只对特定的组件生效，可以只在局部定义它：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.title</span> <span class="token punctuation">{</span>
	<span class="token property">--title-color</span><span class="token punctuation">:</span> aqua<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--title-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>CSS 变量强大的地方在于，<strong>它们是动态的</strong>，因此可以在不同的作用域和运行时进行更改。所以，在 <code>title-color</code> 中可以不去定义一个新的变量 <code>--title-color</code>，我们只需要更改全局作用域中的 <code>--main-color</code> 就可以了，这种更改只会影响这个特定的组件。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">--main-color</span><span class="token punctuation">:</span> aqua<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--main-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="作用域和优先级"><a href="#作用域和优先级" class="header-anchor">#</a> 作用域和优先级</h2> <p>在像 SASS 这样的 CSS 预编译工具中，嵌套 CSS 是很常见的，但这常常会导致选择器非常的复杂：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.card .heading .title</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>为了解决这个问题，引入了 <a href="http://getbem.com/" target="_blank" rel="noopener noreferrer">BEM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这种以以类为中心的规范，来为每个元素设置一个类来降低优先级：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.card</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
<span class="token selector">.card__heading</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
<span class="token selector">.card__title</span> <span class="token punctuation">{</span> ... <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="继承和样式的重新计算"><a href="#继承和样式的重新计算" class="header-anchor">#</a> 继承和样式的重新计算</h2> <p>为了理解作用域对性能的影响，我们首先必须了解浏览器如何处理样式的计算。</p> <p>例如下面的代码:</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.box:nth-last-child(-n+1) .title</span> <span class="token punctuation">{</span>
  <span class="token comment">/* styles */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了知道是否需要应用样式，浏览器实际上必须询问“这是否为有 <code>title</code> 类的元素，其父元素恰好是负第 N 个子元素加上 1 个带 <code>box</code> 类的元素？”计算此结果可能需要大量时间，具体取决于所用的选择器和相应的浏览器。</p> <p>使用像 BEM 这样的单个类，使得样式计算对于浏览器来说更加容易，因为它不再需要比较所有的元素和它的兄弟元素来决定应用什么样式。</p> <h2 id="作用域和-css-变量"><a href="#作用域和-css-变量" class="header-anchor">#</a> 作用域和 CSS 变量</h2> <p>由于 CSS 变量是可继承的，更改它们会导致所有子元素的样式重新计算。这不仅仅适用于 CSS 变量，也适用于其他可继承的属性，如颜色或字体。</p> <p>通常，默认值为 <code>inherit</code> 的 CSS 属性在绝大多数情况下会导致大量的计算重新样式。不断地更改 CSS 变量也会对性能产生影响。一个避免这个问题的方案是在最特定的层级（或最深的选择器）改变 CSS 变量，以防止大量的子元素受到影响而重新计算样式。</p> <p>因此，如果我们要动态地更改 CSS 变量，应该在局部作用域而不是全局作用域中进行，以避免大量的样式重新计算。</p> <h2 id="样式重新计算示例"><a href="#样式重新计算示例" class="header-anchor">#</a> 样式重新计算示例</h2> <p>现在有一个容器，容器内部有 25000 个子元素，为了测试在容器上设置 CSS 变量和在它的子元素上直接设置变量之间的区别，用下面的 HTML &amp; CSS 创建了一个 Codepen。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
... 25000 more elements
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.el</span> <span class="token punctuation">{</span>
	<span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg<span class="token punctuation">,</span> orange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>通过 Javascript, 首先将 <code>--bg</code> 变量设置在容器 <code>.container</code> 上，这导致了 76ms 相当长时间的样式重新计算。接着在第一个子元素 <code>.el</code> 上设置相同的变量，样式重新计算时间只有 1.9ms。因此，父元素使用这个变量的子元素越多，在这个元素上设置 CSS 变量的开销就越大。</p> <p><img src="data:image/png;base64,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" alt="css-variables-style-recalc"></p> <h2 id="将-css-变量与-calc-一起使用"><a href="#将-css-变量与-calc-一起使用" class="header-anchor">#</a> 将 CSS 变量与 Calc() 一起使用</h2> <p>当我们将 CSS 变量与 <code>calc()</code> 函数组合在一起时，它会变得更加强大。特别是对于数值的转换，定义一个多个属性的值相同的没有单位的变量，在它们各自的属性中设置这个变量对应的单位。到目前为止，<code>calc()</code> 主要用于计算响应式元素的宽高。例如，让 <code>div</code> 宽度比 <code>100%</code> 小 <code>100px</code>，可以：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>结合 CSS 变量，<code>calc()</code> 更加强大。向一个没有单位的 CSS 变量添加单位:</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
	<span class="token property">--duration</span><span class="token punctuation">:</span> 2000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">animation-duration</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--duration<span class="token punctuation">)</span> * 1ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="使用-calc-的性能"><a href="#使用-calc-的性能" class="header-anchor">#</a> 使用 <code>calc()</code> 的性能</h3> <p>当结合使用 <code>calc()</code> 和无单元的 CSS 变量时，性能会成为一个问题。为了了解更多关于性能问题的信息，创建了一个 jsPerf 测试用例，来测试使用 <code>calc()</code> 和不使用 <code>calc()</code> 设置属性的几个不同选项。以下是测试的六种方法:</p> <ul><li>variable + calc + px: 使用 <code>calc()</code> 将无单位的 CSS 变量乘以 <code>1px</code></li> <li>variable + px: 设置一个包含 <code>px</code> 值的 CSS 变量</li> <li>px: 设置硬编码的 <code>px</code> 值</li> <li>variable + calc + percent: 使用 <code>calc()</code> 将一个无单位的 CSS 变量乘以 <code>1%</code></li> <li>variable + percent: 设置一个包含 <code>%</code> 值的 CSS 变量</li> <li>percent: 设置硬编码的 <code>%</code> 值</li></ul> <p>如下所示，直接设置硬编码值是最快的（用例 3 和 6），接着是设置一个含有单位值的 CSS 变量（用例 2 和 5）。使用 <code>calc()</code> 设置一个无单元的 CSS 变量是最慢的，但并不比前面的方法慢多少（用例 1 和 4）。</p> <p><img src="/vue-collect/assets/img/css_variables_calc_tests.1988ed32.png" alt="css-variables-calc-tests"></p> <h2 id="浏览器支持情况"><a href="#浏览器支持情况" class="header-anchor">#</a> 浏览器支持情况</h2> <p>一些浏览器在支持 <code>calc()</code> 方面仍然存在问题。从积极的一面来看，所有支持 CSS 变量的浏览器，也都支持与 <code>px</code>、 <code>vmin</code>、 <code>rem</code> 和其他线性距离单位一起使用 <code>calc()</code>。另一方面，Firefox 和 Edge 在其他单位类型如 <code>%</code> 、<code>deg</code> 或 <code>ms</code> 方面也存在问题。 <code>calc()</code> 的这些问题阻碍了许多 CSS 变量的开发，但是渐进增强的使用方式允许在这些受影响的浏览器中使用回退（fallback）。</p> <h2 id="使用-js-设置-css-变量"><a href="#使用-js-设置-css-变量" class="header-anchor">#</a> 使用 JS 设置 CSS 变量</h2> <p>David Khourshid 创建了一个 <a href="https://jsperf.com/css-variables-vs-inline-styles" target="_blank" rel="noopener noreferrer">jsPerf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 测试用例，其中他比较了使用 JavaScript 设置样式的三种不同的方法。通过调整这个测试，我们在这个 <a href="https://jsperf.com/css-variables-vs-inline" target="_blank" rel="noopener noreferrer">jsPerf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 测试中比较了以下情况:</p> <p>首先，设置内联样式:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span>style <span class="token operator">=</span> ’color<span class="token operator">:</span> green’<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其次，使用 <code>setProperty</code> 语法设置样式:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>’color’<span class="token punctuation">,</span> ’green’<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>第三种方法也使用 <code>setProperty</code>，但是用于设置一个 CSS 变量:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>’<span class="token operator">--</span>color’<span class="token punctuation">,</span> ’green’<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>最后一个测试用例通过内联样式设置 CSS 变量:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">&quot;--color: green&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>测试用例被多次应用于 100个 HTML 元素。与 <code>element.style.setProperty</code> 操作相比，Safari 在设置内联样式方面快得多。另一方面，在 Chrome 中，通过内联样式或 <code>setProperty</code> 设置 CSS 变量并没有太大的区别。有趣的是，Firefox 在设置内联样式方面明显落后。因此，跨浏览器首选 <code>setProperty</code>。在所有三种浏览器中，直接设置样式比设置 CSS 变量更快。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>当使用 CSS 变量时，我们总是需要知道变量是在哪个作用域内定义的，如果改变它，是否会影响许多子元素，从而产生大量的样式重新计算。</p> <p>结合使用 <code>calc()</code> 和 CSS 变量是获得更大灵活性和限制我们需要定义的变量数量的好方法。在不同的浏览器中测试 <code>calc()</code> 与 CSS 变量的组合，没有显示任何大的性能问题。然而，一些浏览器对一些单位（如 <code>deg</code> 或 <code>ms</code>）的支持仍然有限，必须牢记这一点。</p> <p>如果我们比较在 JavaScript 中通过内联样式设置变量和 <code>setProperty</code> 设置变量的性能，在不同浏览器之间有一些显著的差异。虽然通过内联样式设置属性在 Safari 中非常快，但在 Firefox 中非常慢，因此首选使用 <code>setProperty</code> 来设置变量。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://lisilinhart.info/posts/css-variables-performance" target="_blank" rel="noopener noreferrer">PERFORMANCE OF CSS VARIABLES<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://webdesign.tutsplus.com/tutorials/how-to-use-css-variables-for-animation--cms-28868" target="_blank" rel="noopener noreferrer">How to Use CSS Variables for Animation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developers.google.com/web/fundamentals/performance/rendering/reduce-the-scope-and-complexity-of-style-calculations" target="_blank" rel="noopener noreferrer">Reduce the Scope and Complexity of Style Calculations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://css-tricks.com/making-custom-properties-css-variables-dynamic/" target="_blank" rel="noopener noreferrer">Making Custom Properties (CSS Variables) More Dynamic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit" style="display:none;"><div class="edit-link"><a href="https://github.com//cxman1/edit/master/docs/articles/CSS/CSS 变量对性能的影响.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/vue-collect/assets/js/app.65dbe37a.js" defer></script><script src="/vue-collect/assets/js/3.c628116f.js" defer></script><script src="/vue-collect/assets/js/1.c6af9e45.js" defer></script><script src="/vue-collect/assets/js/13.edf374e0.js" defer></script>
  </body>
</html>
