(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{492:function(e,t,s){e.exports=s.p+"assets/img/performance_tab.d9f74531.png"},493:function(e,t,s){e.exports=s.p+"assets/img/user_timing.10b0fd3b.png"},494:function(e,t,s){e.exports=s.p+"assets/img/reactive_init.6b67bdf8.png"},495:function(e,t,s){e.exports=s.p+"assets/img/noreactive_init.3c293a9a.png"},560:function(e,t,s){"use strict";s.r(t);var a=s(4),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("在"),a("a",{attrs:{href:"/articles/Vue/VueDose/1-%E6%8F%90%E9%AB%98%20Vue%20%E4%B8%AD%E5%A4%A7%E5%9E%8B%E5%88%97%E8%A1%A8%E7%9A%84%E6%80%A7%E8%83%BD"}},[e._v("提高 Vue 中大型列表的性能")]),e._v("中，我们讨论了如何在大型列表中去提升性能。但是我们仍然无法衡量它真正改善提升了多少。")]),e._v(" "),a("p",[e._v("我们可以使用 "),a("code",[e._v("Chrome DevTools")]),e._v(" 中的 "),a("code",[e._v("Performance")]),e._v(" 标签来做到这一点。但是为了获得准确的数据，我们必须在 "),a("code",[e._v("Vue")]),e._v(" 应用程序上"),a("strong",[e._v("激活性能模式")]),e._v("。")]),e._v(" "),a("p",[e._v("我们可以在 "),a("code",[e._v("main.js")]),e._v(" 文件中或者插件中（对于"),a("code",[e._v("Nuxt")]),e._v("）设置全局变量来做到这一点：")]),e._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[e._v("Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("performance "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("或者，如果你正确设置了 "),a("code",[e._v("NODE_ENV")]),e._v(" 环境变量，则可以在非生产环境中使用它来设置：")]),e._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" isDev "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("NODE_ENV")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!==")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"production"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("performance "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" isDev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("这会激活 Vue 内部用来标记组件性能的 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API",target:"_blank",rel:"noopener noreferrer"}},[e._v("User Timing API"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("我已经创建了"),a("a",{attrs:{href:"https://0ql846q66w.codesandbox.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("这个 CodeSandbox"),a("OutboundLink")],1),e._v("。打开它然后点击 "),a("code",[e._v("Chrome DevTools")]),e._v(" 上 "),a("code",[e._v("Performance")]),e._v("标签上的 "),a("code",[e._v("reload")]),e._v(" 按钮：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(492),alt:"performance_tab"}})]),e._v(" "),a("p",[e._v("这将会记录页面加载性能。由于有了你在 "),a("code",[e._v("main.js")]),e._v(" 里的 "),a("code",[e._v("Vue.config.performance")]),e._v(" 设置，你可以看到 "),a("code",[e._v("User Timing")]),e._v(" 部分：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(493),alt:"user_timing"}})]),e._v(" "),a("p",[e._v("在这里，你会发现三个指标：")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("Init")]),e._v("：创建组件实例所需的时间")]),e._v(" "),a("li",[a("strong",[e._v("Render")]),e._v("：创建 VDom 结构的时间")]),e._v(" "),a("li",[a("strong",[e._v("Patch")]),e._v("： 挂载 VDom 到实际 DOM 的时间")])]),e._v(" "),a("p",[e._v("回到好奇心，"),a("a",{attrs:{href:"/articles/Vue/VueDose/1-%E6%8F%90%E9%AB%98%20Vue%20%E4%B8%AD%E5%A4%A7%E5%9E%8B%E5%88%97%E8%A1%A8%E7%9A%84%E6%80%A7%E8%83%BD"}},[e._v("提高 Vue 中大型列表的性能")]),e._v("的这篇文章的结果如下： 正常组件"),a("strong",[e._v("需要 417ms 去初始化")]),e._v("：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(494),alt:"reactive_init"}})]),e._v(" "),a("p",[e._v("同时使用"),a("code",[e._v("Object.freeze")]),e._v("的非响应式例子需要 "),a("strong",[e._v("3.9ms的时间")]),e._v("：")]),e._v(" "),a("p",[a("img",{attrs:{src:s(495),alt:"noreactive_init"}})]),e._v(" "),a("p",[e._v("当然，每次运行之间的差异可能会有所不同，但两种情况的相差仍然很大。因为响应式的构建发生在组件创建阶段，因此你会在 "),a("code",[e._v("Reactive")]),e._v(" 和 "),a("code",[e._v("NoReactive")]),e._v(" 组件的 "),a("code",[e._v("init")]),e._v(" 部分中看到这种差异。")]),e._v(" "),a("p",[e._v("以上。")]),e._v(" "),a("h3",{attrs:{id:"原文链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原文链接"}},[e._v("#")]),e._v(" "),a("a",{attrs:{href:"https://vuedose.tips/tips/measure-runtime-performance-in-vue-js-apps/",target:"_blank",rel:"noopener noreferrer"}},[e._v("原文链接"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);